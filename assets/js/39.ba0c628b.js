(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{365:function(t,s,a){"use strict";a.r(s);var e=a(5),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("浏览器常用本地存储有三种方式："),s("code",[t._v("Cookie")]),t._v("、"),s("code",[t._v("localStorage")]),t._v("、"),s("code",[t._v("sessionStorage")])]),t._v(" "),s("h2",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),s("p",[s("code",[t._v("Cookie")]),t._v(" 就是访问者在访问网站后留下的一个信息片段。")]),t._v(" "),s("p",[s("code",[t._v("Cookie")]),t._v(" 用于个性化用户的体验。可能包含用户在访问网站时的参数或输入。用户可以自定义浏览器来接受，拒绝或删除 "),s("code",[t._v("Cookie")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("Cookie")]),t._v(" 可以在服务器级别设置和修改，使用 "),s("code",[t._v("Set-Cookie HTTP header")]),t._v(", 或者在 "),s("code",[t._v("JavaScript")]),t._v(" 中用 "),s("code",[t._v("document.cookie")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("Cookie")]),t._v(" 设计初衷是用来和服务器通讯，而不是本地存储，它只是被‘借用’到本地存储。")]),t._v(" "),s("p",[s("code",[t._v("Cookie")]),t._v(" 存储空间小，最大4k、http请求时需要发送到服务器，增加了请求数据量、只能用"),s("code",[t._v("document.cookie='xxx'")]),t._v("来修改")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name=oeschger"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"favorite_food=tripe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示：name=oeschger;favorite_food=tripe")]),t._v("\n")])])]),s("h2",{attrs:{id:"storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage"}},[t._v("#")]),t._v(" Storage")]),t._v(" "),s("p",[t._v("作为 "),s("code",[t._v("Web Storage API")]),t._v(" 的接口，"),s("code",[t._v("Storage")]),t._v(" 提供了访问特定域名下的会话存储或本地存储的功能，例如，可以添加、修改或删除存储的数据项。")]),t._v(" "),s("p",[t._v("如果你想要操作一个域名的会话存储，可以使用 "),s("code",[t._v("Window.sessionStorage")]),t._v("；如果想要操作一个域名的本地存储，可以使用 "),s("code",[t._v("Window.localStorage")]),t._v("。")]),t._v(" "),s("p",[t._v("应该注意，存储在 "),s("code",[t._v("sessionStorage")]),t._v(" 或 "),s("code",[t._v("localStorage")]),t._v(" 中的数据特定于页面的协议。也就是说 "),s("code",[t._v("http://example.com")]),t._v(" 与 "),s("code",[t._v("https://example.com")]),t._v(" 的 "),s("code",[t._v("sessionStorage")]),t._v(" 相互隔离。")]),t._v(" "),s("p",[t._v("被存储的键值对总是以 "),s("code",[t._v("UTF-16 DOMString")]),t._v(" 的格式所存储，其使用两个字节来表示一个字符。对于对象、整数 "),s("code",[t._v("key")]),t._v(" 值会自动转换成字符串形式。")]),t._v(" "),s("p",[t._v("你还可以使用 "),s("code",[t._v("Storage.length")]),t._v(" 来测试存储对象是否为空。")]),t._v(" "),s("h3",{attrs:{id:"localstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[t._v("#")]),t._v(" localStorage")]),t._v(" "),s("p",[s("code",[t._v("localStorage")]),t._v(" 中的键值对总是以字符串的形式存储。 (需要注意，和 "),s("code",[t._v("js")]),t._v(" 对象相比，键值对总是以字符串的形式存储意味着数值类型会自动转化为字符串类型).")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myCat'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Tom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" cat "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myCat'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myCat'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除所有")]),t._v("\nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[t._v("#")]),t._v(" sessionStorage")]),t._v(" "),s("p",[s("code",[t._v("sessionStorage")]),t._v(" 属性允许你访问一个，对应当前源的 "),s("code",[t._v("session Storage")]),t._v(" 对象。它与 "),s("code",[t._v("localStorage")]),t._v(" 相似，不同之处在于 "),s("code",[t._v("localStorage")]),t._v(" 里面存储的数据没有过期时间设置，\n而存储在 "),s("code",[t._v("sessionStorage")]),t._v(" 里面的数据在页面会话结束时会被清除。")]),t._v(" "),s("ul",[s("li",[t._v("页面会话在浏览器打开期间一直保持，并且重新加载或恢复页面仍会保持原来的页面会话。")]),t._v(" "),s("li",[t._v("在新标签或窗口打开一个页面时会复制顶级浏览会话的上下文作为新会话的上下文，这点和 "),s("code",[t._v("session")]),t._v(" "),s("code",[t._v("cookie")]),t._v(" 的运行方式不同。")]),t._v(" "),s("li",[t._v("打开多个相同的 "),s("code",[t._v("URL")]),t._v(" 的 "),s("code",[t._v("Tabs")]),t._v(" 页面，会创建各自的 "),s("code",[t._v("sessionStorage")]),t._v("。")]),t._v(" "),s("li",[t._v("关闭对应浏览器标签或窗口，会清除对应的 "),s("code",[t._v("sessionStorage")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存数据到 sessionStorage")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从 sessionStorage 获取数据")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从 sessionStorage 删除保存的数据")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从 sessionStorage 删除所有保存的数据")]),t._v("\nsessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[t._v("下面的示例会自动保存一个文本输入框的内容，如果浏览器因偶然因素被刷新了，文本输入框里面的内容会被恢复，因此写入的内容不会丢失。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取文本输入框")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" field "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"field"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检测是否存在 autosave 键值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (这个会在页面偶然被刷新的情况下存在)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"autosave"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 恢复文本输入框的内容")]),t._v("\n  field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"autosave"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听文本输入框的 change 事件")]),t._v("\nfield"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保存结果到 sessionStorage 对象中")]),t._v("\n  sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"autosave"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"容量上限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容量上限"}},[t._v("#")]),t._v(" 容量上限")]),t._v(" "),s("p",[t._v("各浏览器支持的 "),s("code",[t._v("localStorage")]),t._v(" 和 "),s("code",[t._v("sessionStorage")]),t._v(" 容量上限不同。")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("HTML5")]),t._v(" 中，新加入了一个 "),s("code",[t._v("localStorage")]),t._v(" / "),s("code",[t._v("sessionStorage")]),t._v(" 特性，这个特性主要是用来作为本地存储来使用的，解决了 "),s("code",[t._v("cookie")]),t._v(" 存储空间不足的问题( "),s("code",[t._v("cookie")]),t._v(" 中每条 "),s("code",[t._v("cookie")]),t._v(" 的存储空间为"),s("code",[t._v("4k")]),t._v(")，\n"),s("code",[t._v("localStorage")]),t._v(" 中一般浏览器支持的是"),s("code",[t._v("5M")]),t._v("大小。")]),t._v(" "),s("h3",{attrs:{id:"优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),s("p",[s("code",[t._v("HTML5")]),t._v(" 专门为存储而设计，最大可存"),s("code",[t._v("5M")]),t._v("、API简单易用 "),s("code",[t._v("setItem")]),t._v(" "),s("code",[t._v("getItem")]),t._v("、不会随着 "),s("code",[t._v("http")]),t._v(" 请求被发送出去")]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN的Document.cookie讲解，封装处理"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN的Storage讲解"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"http://dev-test.nemikor.com/web-storage/support-test/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Storage，对于不同浏览器，容量上限检查"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);